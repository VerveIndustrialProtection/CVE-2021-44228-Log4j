if { windows of operating system} 

	delete run.bat
	move __appendfile run.bat

	waithidden run.bat

elseif {unix of operating system}

	delete run.sh
	move  __appendfile run.sh

	wait /bin/bash run.sh

endif

// Save our result so that we can cleanup the runtime and then handle it.
parameter "success" = "{exists true whose (if true then ((exit code of action = 0) or (exit code of action = 1) or (exit code of action = 2)) else false)}"

// Remove the Java Runtime before checking success
if {windows of operating system}
	folder delete "{parameter "RuntimeDir"}"
elseif {unix of operating system}
	delete __appendfile
	appendfile rm -rf "{parameter "RuntimeDir"}"

	delete cleanup.sh	
	move __appendfile cleanup.sh

	wait /bin/bash cleanup.sh
endif

// Do not proceed of logpresso errored out. This lets us fail the action
continue if {(parameter "success") as boolean}

// Make sure our logpresso log actually has something in it
continue if {(it > 3) of number of lines of files "logpresso.log" of folder (parameter "DataDir")}